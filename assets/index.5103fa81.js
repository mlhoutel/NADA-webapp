var F=Object.defineProperty,H=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var R=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$=(e,t)=>{for(var n in t||(t={}))Z.call(t,n)&&R(e,n,t[n]);if(T)for(var n of T(t))G.call(t,n)&&R(e,n,t[n]);return e},w=(e,t)=>H(e,O(t));import{c as f,o as d,a as A,m as L,r as o,b as g,w as l,d as a,e as M,u as Y,f as j,s as P,g as S,h as C,i as k,V as W,n as K,F as E,j as X,t as I,k as J,l as Q,H as ee,A as te,I as ne,p as oe,q as re,v as ae,x as se,y as ie,z as le,B as ce,C as de,D as ue,E as pe}from"./vendor.083da622.js";const me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};me();const _e={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},he=A("path",{d:"M3.55 18.54l1.41 1.41l1.8-1.79l-1.42-1.42M11 22.45h2V19.5h-2m1-14a6 6 0 0 0-6 6a6 6 0 0 0 6 6a6 6 0 0 0 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.66l1.8 1.79l1.41-1.41l-1.79-1.8m1.79-12.28l-1.41-1.41l-1.8 1.79l1.42 1.42M13 .55h-2V3.5h2m-9 7H1v2h3m2.76-7.66l-1.8-1.79l-1.41 1.41l1.79 1.8l1.42-1.42z",fill:"currentColor"},null,-1),fe=[he];function ge(e,t){return d(),f("svg",_e,fe)}var ve={name:"mdi-white-balance-sunny",render:ge};const $e={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ye=A("path",{d:"M2 12a10 10 0 0 0 13 9.54a10 10 0 0 1 0-19.08A10 10 0 0 0 2 12z",fill:"currentColor"},null,-1),be=[ye];function we(e,t){return d(),f("svg",$e,be)}var Ae={name:"mdi-moon-waning-crescent",render:we};var p=(e,t)=>{for(const[n,i]of t)e[n]=i;return e};const ze={name:"AppBar",components:{mdiSun:ve,mdiMoon:Ae},data(){return{dark:!1}},methods:w($({},L("common",["setTheme"])),{updateTheme(){this.setTheme(this.dark)}})},xe=M("N.A.D.A");function Me(e,t,n,i,r,s){const c=o("n-space"),u=o("mdi-sun"),m=o("mdi-moon"),_=o("n-switch");return d(),g(c,{class:"nada-bar"},{default:l(()=>[a(c,null,{default:l(()=>[xe]),_:1}),a(c,{class:"align-right"},{default:l(()=>[a(_,{value:r.dark,"onUpdate:value":[t[0]||(t[0]=h=>r.dark=h),s.updateTheme],class:"theme-switch"},{checked:l(()=>[a(u)]),unchecked:l(()=>[a(m)]),_:1},8,["value","onUpdate:value"])]),_:1})]),_:1})}var Se=p(ze,[["render",Me],["__scopeId","data-v-449e0128"]]);const De={name:"AppFooter"};function Ce(e,t,n,i,r,s){return d(),f("div",null," @nada webapp is a free and open-source app for the analysis of meteorological data ")}var ke=p(De,[["render",Ce]]);const Ie={name:"Alerts",setup(){const e=Y();return{error(t){e.error(t,{closable:!0,duration:1e4})},info(t){e.info(t,{closable:!0,duration:1e4})}}},data(){return{message:null}},watch:{"$store.state.common.error"(e){this.error(e)},"$store.state.common.info"(e){this.info(e)}}};function Be(e,t,n,i,r,s){return d(),f("div")}var Te=p(Ie,[["render",Be],["__scopeId","data-v-2852903a"]]);const Re={name:"Loader",setup(){const e=j();return{start(){e.start()},finish(){e.finish()},error(){e.error()}}},watch:{"$store.state.common.loading"(e){switch(e){case"start":{this.start();break}case"finish":{this.finish();break}case"error":{this.error();break}}}}};function Le(e,t,n,i,r,s){return d(),f("div")}var Pe=p(Re,[["render",Le],["__scopeId","data-v-b991b43a"]]);const Ee={name:"App",components:{AppBar:Se,AppFooter:ke,Alerts:Te,Loader:Pe}},qe={class:"nada-fullheight"};function Ve(e,t,n,i,r,s){const c=o("n-global-style"),u=o("app-bar"),m=o("alerts"),_=o("loader"),h=o("router-view"),v=o("app-footer"),y=o("n-loading-bar-provider"),b=o("n-message-provider"),x=o("n-config-provider");return d(),g(x,{class:"nada-main",theme:e.$store.state.common.theme},{default:l(()=>[a(b,null,{default:l(()=>[a(y,null,{default:l(()=>[a(c),A("div",qe,[a(u,{class:"nada-header"}),a(m),a(_),a(h,{class:"nada-content"}),a(v,{class:"nada-footer"})])]),_:1})]),_:1})]),_:1},8,["theme"])}var Ne=p(Ee,[["render",Ve]]);const Ue={name:"SplitPane",components:{Splitpanes:P.exports.Splitpanes,Pane:P.exports.Pane},props:{side:{type:Number,default:null},horizontal:{type:Boolean,default:!1},closing:{type:Boolean,default:!1}},emits:["resize","resized"],data(){return{size:50}},mounted(){this.size=this.side},methods:{resize(e){this.$emit("resize",e)},resized(e){this.$emit("resized",e)}}},Fe={class:"split-container"};function He(e,t,n,i,r,s){const c=o("pane"),u=o("splitpanes");return d(),f("div",Fe,[a(u,{class:"default-theme",horizontal:n.horizontal,onResize:s.resize,onResized:s.resized},{default:l(()=>[a(c,{size:r.size},{default:l(()=>[S(e.$slots,"left")]),_:3},8,["size"]),a(c,null,{default:l(()=>[S(e.$slots,"right")]),_:3})]),_:3},8,["horizontal","onResize","onResized"])])}var Oe=p(Ue,[["render",He]]);const Ze={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ge=A("path",{d:"M15 19l-6-2.11V5l6 2.11M20.5 3h-.16L15 5.1L9 3L3.36 4.9c-.21.07-.36.25-.36.48V20.5a.5.5 0 0 0 .5.5c.05 0 .11 0 .16-.03L9 18.9l6 2.1l5.64-1.9c.21-.1.36-.25.36-.48V3.5a.5.5 0 0 0-.5-.5z",fill:"currentColor"},null,-1),Ye=[Ge];function je(e,t){return d(),f("svg",Ze,Ye)}var We={name:"mdi-map",render:je};const Ke={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Xe=A("path",{d:"M12 18a6 6 0 0 1-6-6c0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12a8 8 0 0 0 8 8v3l4-4l-4-4m0-11V1L8 5l4 4V6a6 6 0 0 1 6 6c0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12a8 8 0 0 0-8-8z",fill:"currentColor"},null,-1),Je=[Xe];function Qe(e,t){return d(),f("svg",Ke,Je)}var et={name:"mdi-sync",render:Qe};const tt={name:"SubBar",components:{mdiMap:We,mdiSync:et},computed:$({},C("analysis",["getAirports","getAirport","getAirportId"])),mounted(){this.fetchAirports()},methods:w($({},k("analysis",["fetchAirports","selectAirportById"])),{selectAirport(e){this.selectAirportById(e)},reloadData(){this.fetchAirports()}})},nt=M("Horizontal"),ot=M("Vertical"),rt=M(" Recharger ");function at(e,t,n,i,r,s){const c=o("n-select"),u=o("n-form-item"),m=o("mdi-map"),_=o("n-button"),h=o("n-radio-button"),v=o("n-radio-group"),y=o("mdi-sync"),b=o("n-form"),x=o("n-space");return d(),g(x,{class:"nada-subbar"},{default:l(()=>[a(b,{inline:"","label-placement":"left","show-feedback":!1},{default:l(()=>[a(u,{label:"A\xE9roport"},{default:l(()=>[a(c,{value:e.getAirportId,options:e.getAirports,filterable:"",placeholder:"Selectionnez un a\xE9roport","onUpdate:value":s.selectAirport},null,8,["value","options","onUpdate:value"])]),_:1}),a(u,null,{default:l(()=>[a(_,{onClick:t[0]||(t[0]=D=>e.$store.state.analysis.activemap=!0)},{icon:l(()=>[a(m)]),_:1})]),_:1}),a(u,{style:{"padding-right":"120px"}},{default:l(()=>[a(v,{value:e.$store.state.analysis.layout,"onUpdate:value":t[1]||(t[1]=D=>e.$store.state.analysis.layout=D)},{default:l(()=>[a(h,{value:"h"},{default:l(()=>[nt]),_:1}),a(h,{value:"v"},{default:l(()=>[ot]),_:1})]),_:1},8,["value"])]),_:1}),a(u,{class:"align-right"},{default:l(()=>[a(_,{type:"info",loading:e.$store.state.common.loading=="start",onClick:t[2]||(t[2]=D=>s.reloadData())},{icon:l(()=>[a(y)]),default:l(()=>[rt]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}var st=p(tt,[["render",at],["__scopeId","data-v-7b142ec9"]]);const it={name:"Datagrid",components:{VGrid:W},data(){return{columns:[{prop:"id",name:"Id",size:150,sortable:!0},{prop:"startDate",name:"D\xE9but",columnType:"date",sortable:!0,order:"asc"},{prop:"endDate",name:"Fin",columnType:"date",sortable:!0},{prop:"mesure",name:"Mesure",sortable:!0},{prop:"name",name:"Label",sortable:!0},{prop:"unit",name:"Unit\xE9e",sortable:!0},{prop:"value",name:"Valeur",sortable:!0}],grouping:{props:["mesure"],expandedAll:!0},autosize:{mode:"headerClickAutosize ",allColumns:!0}}},methods:w($({},C("analysis",["getSelectedData"])),{isThemeDark(){return this.$store.state.common.theme!==null}})};function lt(e,t,n,i,r,s){const c=o("v-grid");return d(),g(c,{theme:s.isThemeDark()?"darkMaterial":"material",columns:r.columns,grouping:r.grouping,source:e.getSelectedData(),filter:!1,"auto-size-column":r.autosize,style:{height:"calc(100% - 350px)"}},null,8,["theme","columns","grouping","source","auto-size-column"])}var ct=p(it,[["render",lt]]);const dt={name:"Interval",computed:$({},C("analysis",["getMeasurements","getMeasurement","getMeasurementId"])),methods:w($({},k("analysis",["selectSensorByMesureId","fetchSensors"])),{selectMeasurement(e){this.selectSensorByMesureId(e)}})};function ut(e,t,n,i,r,s){const c=o("n-date-picker"),u=o("n-form-item"),m=o("n-select"),_=o("n-space"),h=o("n-form");return d(),g(h,{inline:"","label-placement":"left","show-feedback":!1},{default:l(()=>[a(u,{label:"P\xE9riode"},{default:l(()=>[a(c,{value:e.$store.state.analysis.period,"onUpdate:value":[t[0]||(t[0]=v=>e.$store.state.analysis.period=v),t[1]||(t[1]=v=>e.fetchSensors())],style:{"padding-right":"170px"},type:"daterange","show-feedback":!0,"update-value-on-close":!0},null,8,["value"])]),_:1}),a(_,{class:"align-right"},{default:l(()=>[a(m,{style:{width:"140px"},value:e.getMeasurementId,options:e.getMeasurements,"show-feedback":!0,filterable:"",placeholder:"Mesure affich\xE9e","onUpdate:value":s.selectMeasurement},null,8,["value","options","onUpdate:value"])]),_:1})]),_:1})}var pt=p(dt,[["render",ut]]);const mt={name:"Timeline",data(){return{chartOptions:{chart:{type:"bar",id:"timeline",toolbar:{show:!1,autoSelected:"selection"},zoom:{enabled:!1},xaxis:{type:"datetime"},selection:{enabled:!0,type:"x",fill:{color:"#579ee6",opacity:.3},stroke:{opacity:0}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:450}}}}}},watch:{"$store.state.common.resized"(){const e=this.$refs.chart;e.updateOptions({chart:{selection:{xaxis:{min:void 0,max:void 0}}}}),e.refresh()}},methods:w($($({},C("analysis",["getTimeline"])),L("analysis",["setSelection"])),{getSeries(){return[{name:"timeline",data:this.getTimeline()}]},getSelection(e,{xaxis:t,yaxis:n}){const i=this.getTimeline().map(r=>r[0]).sort((r,s)=>s-r);i.length&&t.max<i[0]&&this.setSelection([t.min,t.max])}})};function _t(e,t,n,i,r,s){const c=o("apexchart");return d(),g(c,{ref:"chart",width:"100%",height:"300px",options:r.chartOptions,series:s.getSeries(),onSelection:s.getSelection},null,8,["options","series","onSelection"])}var ht=p(mt,[["render",_t]]);const ft={name:"Drawer",props:{side:{type:Number,default:null},cclass:{type:String,default:""},dtitle:{type:String,default:""}},computed:{active:{get:function(){return this.$store.state.analysis.activemap},set:function(e){this.$store.state.analysis.activemap=e}}}};function gt(e,t,n,i,r,s){const c=o("n-drawer-content"),u=o("n-drawer");return d(),f(E,null,[A("div",{id:"drawer-target",class:K(n.cclass)},[S(e.$slots,"content")],2),a(u,{show:s.active,"onUpdate:show":t[0]||(t[0]=m=>s.active=m),placement:"top",to:"#drawer-target",style:{height:"100%"}},{default:l(()=>[a(c,{closable:!0,title:n.dtitle},{default:l(()=>[S(e.$slots,"drawer")]),_:3},8,["title"])]),_:3},8,["show"])],64)}var vt=p(ft,[["render",gt]]),$t="/NADA-webapp/assets/marker.71c672d3.svg";const yt={name:"MapContainer",emits:["selection","zoomChanged","centerChanged"],data(){return{center:[0,0],zoom:8,currentZoom:0,currentCenter:[0,0]}},methods:{selection(e){this.$emit("selection",e)},zoomChanged(e){this.$emit("zoomChanged",e),this.currentZoom=e},centerChanged(e){this.$emit("centerChanged",e),this.currentCenter=e}}};function bt(e,t,n,i,r,s){const c=o("ol-view"),u=o("ol-source-osm"),m=o("ol-tile-layer"),_=o("ol-interaction-select"),h=o("ol-vector-layer"),v=o("ol-map");return d(),g(v,null,{default:l(()=>[a(c,{center:r.center,zoom:r.zoom,projection:"EPSG:4326",onZoomChanged:s.zoomChanged,onCenterChanged:s.centerChanged},null,8,["center","zoom","onZoomChanged","onCenterChanged"]),a(m,null,{default:l(()=>[a(u,{"image-smoothing":!0})]),_:1}),a(_,{onSelect:s.selection},null,8,["onSelect"]),a(h,null,{default:l(()=>[S(e.$slots,"overlay")]),_:3}),S(e.$slots,"layout")]),_:3})}var q=p(yt,[["render",bt]]);const wt={name:"MapAirports",components:{MapContainer:q},data(){return{marker:$t,coordinates:[]}},computed:w($({},C("analysis",["getAirports","getAirport","getAirportsCoordinates"])),{currentCenter(){var e;return((e=this.$refs.map)==null?void 0:e.center)?this.$refs.map.center:[0,0]},currentZoom(){var e;return((e=this.$refs.map)==null?void 0:e.zoom)?this.$refs.map.zoom:8}}),async mounted(){this.$store.state.common.loading="start",this.coordinates=await this.getAirportsCoordinates,this.$store.state.common.loading="finish",this.coordinates.length&&(this.$refs.map.center=this.coordinates[0].coordinates)},methods:w($({},k("analysis",["selectAirportById"])),{selection(e){const t=e.mapBrowserEvent.coordinate,n=this.coordinates.filter(i=>{if(!i.coordinates.length)return!1;const r=i.coordinates[0]-t[0],s=i.coordinates[1]-t[1];return Math.abs(r)+Math.abs(s)<1});if(n.length)this.selectAirportById(n[0].value),this.$store.state.analysis.activemap=!1;else{const i=new Date().toTimeString().split(" ")[0];this.$store.state.common.error=`[${i}] An error occured during the selection...`}}})};function At(e,t,n,i,r,s){const c=o("ol-geom-point"),u=o("ol-style-icon"),m=o("ol-style-text"),_=o("ol-style"),h=o("ol-feature"),v=o("ol-source-vector"),y=o("n-statistic"),b=o("n-col"),x=o("n-row"),D=o("map-container");return d(),g(D,{ref:"map",style:{height:"calc(100% - 80px)"},onSelection:s.selection},{overlay:l(()=>[a(v,null,{default:l(()=>[(d(!0),f(E,null,X(r.coordinates,(B,U)=>(d(),g(h,{key:U},{default:l(()=>[a(c,{coordinates:B.coordinates},null,8,["coordinates"]),a(_,null,{default:l(()=>[a(u,{src:r.marker,scale:2.5,opacity:.9},null,8,["src","scale","opacity"]),a(m,{text:B.label,scale:1.5,"offset-y":40},null,8,["text","scale"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),layout:l(()=>[a(x,{style:{"margin-bottom":"10px"}},{default:l(()=>[a(b,{span:12},{default:l(()=>[a(y,{label:"Coordonn\xE9es"},{default:l(()=>[M(" ["+I(Number(s.currentCenter[0]).toFixed(2))+"; "+I(Number(s.currentCenter[1]).toFixed(2))+"] ",1)]),_:1})]),_:1}),a(b,{span:12},{default:l(()=>[a(y,{label:"Zoom"},{default:l(()=>[M(" x"+I(Number(s.currentZoom).toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSelection"])}var zt=p(wt,[["render",At]]);const xt={name:"Weather"};function Mt(e,t,n,i,r,s){return d(),f("div")}var St=p(xt,[["render",Mt]]);const Dt={name:"Position",components:{MapContainer:q}};function Ct(e,t,n,i,r,s){const c=o("map-container");return d(),g(c,{style:{height:"100%"}})}var kt=p(Dt,[["render",Ct]]);const It={name:"Pollution"};function Bt(e,t,n,i,r,s){return d(),f("div")}var Tt=p(It,[["render",Bt]]);const Rt={name:"Graphs",components:{Weather:St,Position:kt,Pollution:Tt}};function Lt(e,t,n,i,r,s){const c=o("weather"),u=o("n-tab-pane"),m=o("position"),_=o("pollution"),h=o("n-tabs");return d(),g(h,{"default-value":"weather",size:"large",style:{height:"100%"}},{default:l(()=>[a(u,{name:"weather",tab:"M\xE9t\xE9o"},{default:l(()=>[a(c)]),_:1}),a(u,{name:"position",tab:"Position",style:{height:"100%"}},{default:l(()=>[a(m,{style:{height:"100%"}})]),_:1}),a(u,{name:"pollution",tab:"Pollution"},{default:l(()=>[a(_)]),_:1})]),_:1})}var Pt=p(Rt,[["render",Lt]]);const Et={name:"Analysis",components:{SplitPanes:Oe,Interval:pt,Timeline:ht,Datagrid:ct,Graphs:Pt,SubBar:st,Drawer:vt,MapAirports:zt},watch:{"$store.state.analysis.layout"(){this.resized()}},mounted(){window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{resized(){this.$store.state.common.resized=new Date},onResize(){window.innerHeight<800&&(this.$store.state.analysis.layout="v")}}},qt={class:"nada-pane"},Vt={class:"nada-pane"};function Nt(e,t,n,i,r,s){const c=o("sub-bar"),u=o("interval"),m=o("timeline"),_=o("datagrid"),h=o("graphs"),v=o("split-panes"),y=o("n-skeleton"),b=o("map-airports"),x=o("drawer");return d(),f("div",null,[a(c),a(x,{cclass:"nada-split",dtitle:"Carte des a\xE9roports"},{content:l(()=>[a(v,{side:50,horizontal:e.$store.state.analysis.layout=="v",onResized:s.resized},{left:l(()=>[A("div",qt,[a(u),a(m),a(_)])]),right:l(()=>[A("div",Vt,[a(h)])]),_:1},8,["horizontal","onResized"])]),drawer:l(()=>[e.$store.state.analysis.activemap?(d(),g(b,{key:1})):(d(),g(y,{key:0,height:"100%",width:"100%"}))]),_:1})])}var V=p(Et,[["render",Nt]]);const Ut=[{path:"/",name:"Home",component:V},{path:"/:catchAll(.*)",name:"Home",component:V}],Ft=J({history:Q(),routes:Ut});var Ht={theme:null,error:null,info:null,loading:null,resized:new Date},Ot={getError(e){return e.error},getInfo(e){return e.info}};const Zt=new ee({uri:"http://localhost:9002/graphql"}),Gt=new te({link:Zt,cache:new ne,connectToDevTools:!0});var N=oe({defaultClient:Gt}),Yt={async appoloRequest({state:e},{query:t,error:n}){try{e.loading="start";const i=await N.defaultClient.query({query:re(t)});return e.loading="finish",i}catch(i){const r=new Date().toTimeString().split(" ")[0];e.error=`[${r}] ${n}`,e.loading="error"}}},jt={setTheme(e,t){e.theme=t?ae:null}},Wt={namespaced:!0,state:Ht,getters:Ot,actions:Yt,mutations:jt},Kt={layout:"h",period:[new Date,new Date],day:!1,airport:null,airports:[],sensor:null,sensors:[],selection:[],activemap:!1},Xt={getAirports(e){return e.airports.map(t=>({label:t.name,value:t.id}))},getAirport(e){var t,n;return{label:(t=e.airport)==null?void 0:t.name,value:(n=e.airport)==null?void 0:n.id}},getAirportId(e){var t;return(t=e.airport)==null?void 0:t.id},async getAirportsCoordinates(e,t){return await Promise.all(t.getAirports.map(async n=>await se.get(`https://nominatim.openstreetmap.org/search?q=${n.label}+Airport&format=json`).then(i=>{const r=i.data;let s=r.filter(c=>c.osm_type=="node")[0];return s==null&&(s=r[0]),{value:n.value,label:n.label,coordinates:s==null?[]:[s.lat,s.lon]}})))},getMeasurements(e){return e.sensors.map(t=>({label:t.measurement.name,value:t.measurement.id}))},getMeasurement(e){var t,n;return{label:(t=e.sensor)==null?void 0:t.measurement.name,value:(n=e.sensor)==null?void 0:n.measurement.id}},getMeasurementId(e){var t;return(t=e.sensor)==null?void 0:t.measurement.id},getTimeline(e){if(e.sensor==null)return[];const t=e.sensors.find(n=>{var i;return n.id===((i=e.sensor)==null?void 0:i.id)});return(t==null?void 0:t.getMeanMeasureInterval)==null?[]:t.getMeanMeasureInterval.map(n=>{const i=n.startDate==null?"":n.startDate;return[new Date(i).getTime(),n.value]})},getData(e){return e.sensors.map(t=>{if(t.getMeanMeasureInterval==null)return[];const n=t.measurement;return t.getMeanMeasureInterval.map(i=>({id:i.id,startDate:i.startDate,endDate:i.endDate,value:i.value,mesure:n.id,name:n.name,unit:n.unit}))}).flat()},getSelectedData(e,t){return e.selection.length?t.getData.filter(n=>new Date(n.startDate)>=new Date(e.selection[0])&&new Date(n.startDate)<=new Date(e.selection[1])):t.getData}},Jt={async fetchAirports({dispatch:e,commit:t}){let n=await e("common/appoloRequest",{query:`{
              airports {
                    id
                    name
                }
            }`,error:"An error occured during the fetching of the airports. Retrying in 10 seconds..."},{root:!0});for(;n==null;)await new Promise(i=>setTimeout(i,1e4)),n=await e("common/appoloRequest",{query:`{
              airports {
                    id
                    name
                }
            }`,error:"An error occured during the fetching of the airports. Retrying in 10 seconds..."},{root:!0});t("setAirports",n.data.airports),e("selectAirportById",n.data.airports[0].id)},selectAirportDefault({dispatch:e,state:t}){t.airports.length&&e("selectAirportById",t.airports[0].id)},selectAirportById({commit:e,dispatch:t,state:n},i){const r=n.airports.find(s=>s.id===i);e("setAirport",r),t("fetchSensors")},async fetchSensors({commit:e,dispatch:t,state:n}){var r;if(n.airport==null||n.period==null||!((r=n.period)==null?void 0:r.length))return;const i=await t("common/appoloRequest",{query:`{
            getAirportById(id: "${n.airport.id}") {
                name
                id
                sensors {
                    id
                    measurement {
                        id
                        name
                        unit
                    }
                    getMeanMeasureInterval(start: "${n.period[0]}", end: "${n.period[1]}", discretize: 24, discretizeMode: PER_DAY) {
                        id
                        value
                        startDate
                        endDate
                    }
                }
            }
        }`,error:"An error occured during the fetching of the sensors."},{root:!0});i!=null&&(e("setSensors",i.data.getAirportById.sensors),e("setSensor",i.data.getAirportById.sensors[0]))},selectSensorByMesureId({dispatch:e,commit:t,state:n},i){const r=n.sensors.find(s=>s.measurement.id===i);t("setSensor",r)}},Qt={setAirports(e,t){e.airports=t},setAirport(e,t){e.airport=t},setSensors(e,t){e.sensors=t},setSensor(e,t){e.sensor=t},setSelection(e,t){e.selection=t}},en={namespaced:!0,state:Kt,getters:Xt,actions:Jt,mutations:Qt},tn=ie({modules:{common:Wt,analysis:en}});const z=le(Ne);z.use(ce);z.use(Ft);z.use(tn);z.use(N);z.use(de);z.use(ue);z.config.globalProperties.$apexcharts=pe;z.mount("#app");
